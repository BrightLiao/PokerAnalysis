# ç³»ç»Ÿæ¶æ„è¯´æ˜

## æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ å‘½ä»¤è¡Œç•Œé¢     â”‚         â”‚ æ¸¸æˆçŠ¶æ€æ˜¾ç¤º   â”‚                 â”‚
â”‚  â”‚ (è¾“å…¥è¡ŒåŠ¨)    â”‚         â”‚ (å®æ—¶æ›´æ–°)    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                â”‚
                     â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åº”ç”¨æ§åˆ¶å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            PokerLiveClient                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚ ç›‘æ§å¾ªç¯        â”‚  â”‚ è¡ŒåŠ¨æ‰§è¡Œ          â”‚          â”‚   â”‚
â”‚  â”‚  â”‚ monitor_loop   â”‚  â”‚ execute_action   â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PokerNow Client åº“                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ GameState    â”‚  â”‚ ActionHelper â”‚  â”‚ Cookie      â”‚       â”‚
â”‚  â”‚ Manager      â”‚  â”‚              â”‚  â”‚ Manager     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚            ElementHelper                         â”‚       â”‚
â”‚  â”‚    (é¡µé¢å…ƒç´ æŸ¥æ‰¾å’Œæ“ä½œ)                           â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Selenium WebDriver                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æµè§ˆå™¨è‡ªåŠ¨åŒ– (Firefox/Chrome)                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PokerNow ç½‘ç«™                              â”‚
â”‚          https://www.pokernow.club/                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. PokerLiveClient (åº”ç”¨æ§åˆ¶å±‚)

**èŒè´£ï¼š** æ•´åˆå„ä¸ªæ¨¡å—ï¼Œæä¾›å®æ—¶ç›‘æ§å’Œäº¤äº’åŠŸèƒ½

**æ ¸å¿ƒæ–¹æ³•ï¼š**
```python
class PokerLiveClient:
    def __init__(...)              # åˆå§‹åŒ–æµè§ˆå™¨å’Œclient
    def login_and_navigate()       # ç™»å½•å¹¶å¯¼èˆªåˆ°æ¸¸æˆ
    def monitor_loop()             # ä¸»ç›‘æ§å¾ªç¯
    def display_game_state()       # æ˜¾ç¤ºæ¸¸æˆçŠ¶æ€
    def get_user_action()          # è·å–ç”¨æˆ·è¾“å…¥
    def execute_action()           # æ‰§è¡Œè¡ŒåŠ¨
```

**æ•°æ®æµï¼š**
```
è·å–æ¸¸æˆçŠ¶æ€ â†’ æ˜¾ç¤ºçŠ¶æ€ â†’ æ£€æµ‹æ˜¯å¦è½®åˆ°ä½  
    â†“ æ˜¯                        â†“ å¦
è·å–ç”¨æˆ·è¾“å…¥                  ç­‰å¾…åˆ·æ–°
    â†“
æ‰§è¡Œè¡ŒåŠ¨
    â†“
ç»§ç»­ç›‘æ§å¾ªç¯
```

---

### 2. PokerClient (PokerNow Clientåº“)

**èŒè´£ï¼š** å°è£…ä¸PokerNowç½‘ç«™çš„äº¤äº’é€»è¾‘

**å­æ¨¡å—ï¼š**

#### 2.1 GameStateManager
```python
# è·å–æ¸¸æˆçŠ¶æ€
get_game_state() â†’ GameState
    â”œâ”€â”€ game_type: æ¸¸æˆç±»å‹
    â”œâ”€â”€ pot_size: åº•æ± å¤§å°
    â”œâ”€â”€ community_cards: [Card]
    â”œâ”€â”€ players: [PlayerInfo]
    â”œâ”€â”€ dealer_position: åº„å®¶ä½ç½®
    â”œâ”€â”€ current_player: å½“å‰ç©å®¶
    â”œâ”€â”€ blinds: [ç›²æ³¨]
    â”œâ”€â”€ winners: [è·èƒœè€…]
    â””â”€â”€ is_your_turn: æ˜¯å¦è½®åˆ°ä½ 
```

#### 2.2 ActionHelper
```python
# è¡ŒåŠ¨ç®¡ç†
get_available_actions() â†’ {action: element}
perform_action(action, amount=None)
    â”œâ”€â”€ Call/Check/Fold â†’ ç›´æ¥ç‚¹å‡»
    â””â”€â”€ Raise â†’ è¾“å…¥é‡‘é¢ + ç¡®è®¤
```

#### 2.3 CookieManager
```python
# ç™»å½•çŠ¶æ€ç®¡ç†
load_cookies()  # åŠ è½½å·²ä¿å­˜çš„cookies
save_cookies()  # ä¿å­˜å½“å‰cookies
```

#### 2.4 ElementHelper
```python
# é¡µé¢å…ƒç´ æ“ä½œ
wait_for_element(selector)
get_element(selector)
get_text(selector)
```

---

### 3. æ•°æ®æ¨¡å‹

```python
# æ¸¸æˆçŠ¶æ€
GameState {
    game_type: str
    pot_size: str
    community_cards: List[str]
    players: List[PlayerInfo]
    dealer_position: str
    current_player: str
    blinds: List[str]
    winners: List[dict]
    is_your_turn: bool
}

# ç©å®¶ä¿¡æ¯
PlayerInfo {
    name: str
    stack: str
    bet_value: str
    cards: List[str]
    status: PlayerState
    hand_message: str
}

# ç©å®¶çŠ¶æ€
PlayerState = CURRENT | ACTIVE | FOLDED | OFFLINE
```

---

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯äº¤äº’ | å‘½ä»¤è¡Œ | ä½¿ç”¨Pythonæ ‡å‡†è¾“å…¥è¾“å‡º |
| åº”ç”¨å±‚ | Python 3.8+ | ä¸»ç¨‹åºé€»è¾‘ |
| è‡ªåŠ¨åŒ–å±‚ | Selenium 4.0+ | æµè§ˆå™¨è‡ªåŠ¨åŒ– |
| æµè§ˆå™¨ | Firefox/Chrome | WebDriveræ”¯æŒ |
| ç›®æ ‡ç½‘ç«™ | PokerNow.club | å¾·å·æ‰‘å…‹åœ¨çº¿å¹³å° |

---

## å·¥ä½œæµç¨‹

### å¯åŠ¨æµç¨‹
```
1. åˆå§‹åŒ–WebDriver
   â†“
2. åˆ›å»ºPokerClient
   â†“
3. åŠ è½½Cookies (å¦‚æœå­˜åœ¨)
   â†“
4. å¯¼èˆªåˆ°æ¸¸æˆé¡µé¢
   â†“
5. è¿›å…¥ç›‘æ§å¾ªç¯
```

### ç›‘æ§å¾ªç¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è·å–æ¸¸æˆçŠ¶æ€                     â”‚
â”‚     client.game_state_manager       â”‚
â”‚           .get_game_state()         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æ˜¾ç¤ºçŠ¶æ€åˆ°å‘½ä»¤è¡Œ                 â”‚
â”‚     display_game_state(state)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ æ˜¯å¦è½®åˆ°ä½ ï¼Ÿâ”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         æ˜¯ â†  â”‚  â†’ å¦
         â†“           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3a. æ˜¾ç¤ºå¯ç”¨è¡ŒåŠ¨ â”‚  â”‚ 3b. ç­‰å¾…Nç§’åˆ·æ–°   â”‚
â”‚ 4a. è·å–ç”¨æˆ·è¾“å…¥ â”‚  â”‚                  â”‚
â”‚ 5a. æ‰§è¡Œè¡ŒåŠ¨    â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ 6. ç»§ç»­å¾ªç¯       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…³é”®CSSé€‰æ‹©å™¨

PokerNow Client ä½¿ç”¨çš„ä¸»è¦é€‰æ‹©å™¨ï¼š

```css
/* æ¸¸æˆä¿¡æ¯ */
.table-game-type                      /* æ¸¸æˆç±»å‹ */
.table-pot-size .main-value          /* åº•æ±  */
.table-cards .card-container         /* å…¬å…±ç‰Œ */

/* ç©å®¶ä¿¡æ¯ */
.table-player                        /* ç©å®¶å…ƒç´  */
.table-player-name a                 /* ç©å®¶åç§° */
.table-player-stack .chips-value     /* ç­¹ç  */
.table-player-bet-value .chips-value /* ä¸‹æ³¨ */
.table-player-cards .card-container  /* ç©å®¶æ‰‹ç‰Œ */

/* è¡ŒåŠ¨æŒ‰é’® */
.game-decisions-ctn .button-1.call   /* Call */
.game-decisions-ctn .button-1.raise  /* Raise */
.game-decisions-ctn .button-1.check  /* Check */
.game-decisions-ctn .button-1.fold   /* Fold */

/* çŠ¶æ€ */
.action-signal                       /* è¡ŒåŠ¨æç¤º */
.dealer-button-ctn                   /* åº„å®¶æŒ‰é’® */
.table-player.winner                 /* è·èƒœè€… */
```

---

## æ‰©å±•æ¥å£

### æœªæ¥å¯é›†æˆçš„æ¨¡å—

```python
# 1. AIå†³ç­–å¼•æ“
class AIDecisionEngine:
    def get_action(self, game_state) -> (action, amount):
        """è°ƒç”¨Gemini APIè·å–å†³ç­–"""
        pass

# 2. å†å²è®°å½•
class HandHistory:
    def record_hand(self, game_state):
        """è®°å½•æ¯æ‰‹ç‰Œ"""
        pass
    
    def get_player_stats(self, player_name):
        """è·å–ç©å®¶ç»Ÿè®¡"""
        pass

# 3. ç­–ç•¥å¼•æ“
class StrategyEngine:
    def calculate_pot_odds(self, state):
        """è®¡ç®—åº•æ± èµ”ç‡"""
        pass
    
    def get_position_strategy(self, position):
        """è·å–ä½ç½®ç­–ç•¥"""
        pass
```

### é›†æˆç‚¹

åœ¨ `get_user_action()` æ–¹æ³•ä¸­ï¼š

```python
def get_user_action(self):
    # ç°æœ‰ï¼šè·å–ç”¨æˆ·è¾“å…¥
    
    # æœªæ¥ï¼šAIå†³ç­–
    ai_suggestion = self.ai_engine.get_action(state)
    print(f"ğŸ’¡ AIå»ºè®®: {ai_suggestion}")
    
    # ç”¨æˆ·å¯é€‰æ‹©æ¥å—æˆ–è‡ªå®šä¹‰
    ...
```

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å‡å°‘DOMæŸ¥è¯¢é¢‘ç‡**
   - ç¼“å­˜ä¸å¸¸å˜åŒ–çš„å…ƒç´ 
   - ä½¿ç”¨æ›´é«˜æ•ˆçš„é€‰æ‹©å™¨

2. **å¼‚æ­¥å¤„ç†**
   - çŠ¶æ€è·å–ä¸æ˜¾ç¤ºåˆ†ç¦»
   - ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†è€—æ—¶æ“ä½œ

3. **æ™ºèƒ½åˆ·æ–°**
   - åªåœ¨çŠ¶æ€å˜åŒ–æ—¶æ›´æ–°æ˜¾ç¤º
   - æ ¹æ®æ¸¸æˆèŠ‚å¥åŠ¨æ€è°ƒæ•´åˆ·æ–°é—´éš”

4. **èµ„æºç®¡ç†**
   - åŠæ—¶é‡Šæ”¾WebDriverèµ„æº
   - å®šæœŸæ¸…ç†æµè§ˆå™¨ç¼“å­˜

---

## é”™è¯¯å¤„ç†

```python
# å¤šå±‚é”™è¯¯å¤„ç†
try:
    # ç›‘æ§å¾ªç¯
    while True:
        try:
            # è·å–çŠ¶æ€
            state = get_game_state()
        except NoSuchElementException:
            # å…ƒç´ æœªæ‰¾åˆ°ï¼Œå¯èƒ½é¡µé¢æœªåŠ è½½
            time.sleep(1)
            continue
        except WebDriverException:
            # WebDriverå¼‚å¸¸ï¼Œå°è¯•é‡è¿
            reconnect()
            continue
except KeyboardInterrupt:
    # ç”¨æˆ·ä¸­æ–­
    cleanup()
except Exception as e:
    # å…¶ä»–æœªçŸ¥é”™è¯¯
    log_error(e)
    cleanup()
```

---

## å®‰å…¨æ€§è€ƒè™‘

1. **Cookieå®‰å…¨**
   - ä½¿ç”¨pickleåŠ å¯†å­˜å‚¨
   - è®¾ç½®æ–‡ä»¶æƒé™ï¼ˆä»…å½“å‰ç”¨æˆ·å¯è¯»ï¼‰

2. **ç½‘ç»œå®‰å…¨**
   - ä½¿ç”¨HTTPS
   - éªŒè¯SSLè¯ä¹¦

3. **è´¦å·å®‰å…¨**
   - ä¸è®°å½•æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ç­‰ï¼‰
   - éµå®ˆç½‘ç«™ä½¿ç”¨æ¡æ¬¾

---

**æ¶æ„è®¾è®¡åŸåˆ™ï¼š**
- âœ… æ¨¡å—åŒ–ï¼šå„æ¨¡å—èŒè´£æ¸…æ™°
- âœ… å¯æ‰©å±•ï¼šæ˜“äºæ·»åŠ æ–°åŠŸèƒ½
- âœ… å¯ç»´æŠ¤ï¼šä»£ç ç»“æ„æ¸…æ™°
- âœ… å¯æµ‹è¯•ï¼šå„æ¨¡å—å¯ç‹¬ç«‹æµ‹è¯•

